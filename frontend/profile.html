<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‰∏™‰∫∫ËÆæÁΩÆ - ‰π¶Á≠æÁÆ°ÁêÜÂô®</title>
    <style>
        /* ========================================
           STEP 1: Âü∫Á°ÄÁªìÊûÑ + Â∏ÉÂ±ÄÊ°ÜÊû∂
           ======================================== */
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* ‰∏ªËâ≤Ë∞É */
            --color-primary: #667eea;
            --color-primary-dark: #5a6fd6;
            --color-primary-light: #8b9df0;
            --color-primary-bg: rgba(102, 126, 234, 0.1);

            /* ÂäüËÉΩËâ≤ */
            --color-success: #10B981;
            --color-warning: #F59E0B;
            --color-error: #EF4444;
            --color-info: #3B82F6;

            /* ÊñáÂ≠óÈ¢úËâ≤ */
            --text-primary: #1a1a2e;
            --text-secondary: #64748b;
            --text-tertiary: #94a3b8;
            --text-white: #ffffff;

            /* ËÉåÊôØËâ≤ */
            --bg-primary: #f8fafc;
            --bg-secondary: #f1f5f9;
            --bg-card: #ffffff;
            --bg-hover: #f1f5f9;

            /* ËæπÊ°Ü */
            --border-color: #e2e8f0;
            --border-light: #f1f5f9;

            /* Èò¥ÂΩ± */
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);

            /* ÂúÜËßí */
            --radius-sm: 6px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --radius-xl: 16px;

            /* ËøáÊ∏° */
            --transition: all 0.2s ease;
        }

        /* Ê∑±Ëâ≤‰∏ªÈ¢òÂèòÈáè */
        [data-theme="dark"] {
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-tertiary: #64748b;

            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-card: #1e293b;
            --bg-hover: #334155;

            --border-color: #334155;
            --border-light: #1e293b;

            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
        }

        /* È°µÈù¢Â∏ÉÂ±Ä */
        .page-container {
            display: flex;
            min-height: 100vh;
        }

        /* ========== ‰æßËæπÂØºËà™ ========== */
        .sidebar {
            width: 280px;
            background: var(--bg-card);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            position: fixed;
            left: 0;
            top: 0;
            bottom: 0;
            z-index: 100;
        }

        .sidebar-header {
            padding: 24px;
            border-bottom: 1px solid var(--border-light);
        }

        .sidebar-back {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 14px;
            color: var(--text-secondary);
            text-decoration: none;
            padding: 8px 12px;
            margin: -8px -12px;
            border-radius: var(--radius-md);
            transition: var(--transition);
        }

        .sidebar-back:hover {
            background: var(--bg-hover);
            color: var(--color-primary);
        }

        .sidebar-back svg {
            width: 18px;
            height: 18px;
        }

        .sidebar-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-primary);
            margin-top: 20px;
        }

        .sidebar-nav {
            flex: 1;
            padding: 16px;
            overflow-y: auto;
        }

        .nav-section {
            margin-bottom: 24px;
        }

        .nav-section-title {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            padding: 0 12px;
            margin-bottom: 8px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            font-size: 14px;
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 4px;
        }

        .nav-item:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }

        .nav-item.active {
            background: var(--color-primary-bg);
            color: var(--color-primary);
            font-weight: 500;
        }

        .nav-item svg {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
        }

        .nav-item-emoji {
            font-size: 18px;
            width: 20px;
            text-align: center;
        }

        /* ========== ‰∏ªÂÜÖÂÆπÂå∫ ========== */
        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 32px;
            max-width: 800px;
        }

        .content-header {
            margin-bottom: 32px;
        }

        .content-title {
            font-size: 28px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .content-subtitle {
            font-size: 14px;
            color: var(--text-secondary);
        }

        /* ËÆæÁΩÆÂç°Áâá */
        .settings-card {
            background: var(--bg-card);
            border-radius: var(--radius-xl);
            border: 1px solid var(--border-color);
            padding: 24px;
            margin-bottom: 24px;
        }

        .settings-card-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-light);
        }

        /* ËÆæÁΩÆÈ°π */
        .setting-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 0;
            border-bottom: 1px solid var(--border-light);
        }

        .setting-item:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }

        .setting-item:first-child {
            padding-top: 0;
        }

        .setting-info {
            flex: 1;
        }

        .setting-label {
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .setting-desc {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .setting-action {
            margin-left: 24px;
        }

        /* ÊåâÈíÆÊ†∑Âºè */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 500;
            border-radius: var(--radius-md);
            border: none;
            cursor: pointer;
            transition: var(--transition);
        }

        .btn svg {
            width: 16px;
            height: 16px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        .btn-secondary:hover {
            background: var(--bg-hover);
            border-color: var(--color-primary);
        }

        .btn-danger {
            background: var(--color-error);
            color: white;
        }

        .btn-danger:hover {
            background: #dc2626;
        }

        .btn-outline {
            background: transparent;
            color: var(--color-primary);
            border: 1px solid var(--color-primary);
        }

        .btn-outline:hover {
            background: var(--color-primary-bg);
        }

        /* Ë°®ÂçïÊ†∑Âºè */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .form-input {
            width: 100%;
            height: 44px;
            padding: 0 16px;
            font-size: 14px;
            color: var(--text-primary);
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            outline: none;
            transition: var(--transition);
        }

        .form-input:focus {
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px var(--color-primary-bg);
        }

        .form-input::placeholder {
            color: var(--text-tertiary);
        }

        .form-hint {
            font-size: 12px;
            color: var(--text-secondary);
            margin-top: 6px;
        }

        .form-error {
            font-size: 12px;
            color: var(--color-error);
            margin-top: 6px;
            display: none;
        }

        .form-group.error .form-error {
            display: block;
        }

        .form-group.error .form-input {
            border-color: var(--color-error);
        }

        /* Toast ÊèêÁ§∫ */
        .toast-container {
            position: fixed;
            top: 24px;
            right: 24px;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .toast {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px 20px;
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-xl);
            border: 1px solid var(--border-color);
            animation: slideIn 0.3s ease;
            max-width: 360px;
        }

        .toast.success {
            border-left: 4px solid var(--color-success);
        }

        .toast.error {
            border-left: 4px solid var(--color-error);
        }

        .toast.warning {
            border-left: 4px solid var(--color-warning);
        }

        .toast-icon {
            width: 24px;
            height: 24px;
            flex-shrink: 0;
        }

        .toast.success .toast-icon {
            color: var(--color-success);
        }

        .toast.error .toast-icon {
            color: var(--color-error);
        }

        .toast.warning .toast-icon {
            color: var(--color-warning);
        }

        .toast-message {
            flex: 1;
            font-size: 14px;
            color: var(--text-primary);
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* ÂÜÖÂÆπÂå∫ÂüüÂç†‰Ωç - ÂêéÁª≠Ê≠•È™§ÊõøÊç¢ */
        .section-placeholder {
            display: none;
        }

        .section-content {
            display: none;
        }

        .section-content.active {
            display: block;
        }

        /* ÂìçÂ∫îÂºèËÆæËÆ° */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }

            .sidebar.show {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
                padding: 20px;
            }

            .mobile-header {
                display: flex;
                align-items: center;
                gap: 16px;
                margin-bottom: 24px;
            }

            .mobile-menu-btn {
                display: flex;
                align-items: center;
                justify-content: center;
                width: 40px;
                height: 40px;
                background: var(--bg-card);
                border: 1px solid var(--border-color);
                border-radius: var(--radius-md);
                cursor: pointer;
            }

            .mobile-menu-btn svg {
                width: 20px;
                height: 20px;
                color: var(--text-primary);
            }
        }

        @media (min-width: 769px) {
            .mobile-header {
                display: none;
            }
        }

        /* ÈÅÆÁΩ©Â±Ç */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 90;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .overlay.show {
            opacity: 1;
            visibility: visible;
        }

        /* STEP 2: ‰∏™‰∫∫‰ø°ÊÅØÊ†∑Âºè */
        .profile-avatar-section {
            display: flex;
            align-items: center;
            gap: 24px;
            padding-bottom: 24px;
            border-bottom: 1px solid var(--border-light);
            margin-bottom: 24px;
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            background: var(--color-primary-bg);
            border-radius: 50%;
            border: 3px solid var(--color-primary);
            cursor: pointer;
            transition: var(--transition);
            position: relative;
        }

        .profile-avatar:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .profile-avatar-edit {
            position: absolute;
            bottom: -4px;
            right: -4px;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--color-primary);
            color: white;
            border-radius: 50%;
            border: 2px solid var(--bg-card);
        }

        .profile-avatar-edit svg {
            width: 14px;
            height: 14px;
        }

        .profile-avatar-info h3 {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .profile-avatar-info p {
            font-size: 14px;
            color: var(--text-secondary);
        }

        /* Â§¥ÂÉèÈÄâÊã©Âô®ÂºπÁ™ó */
        .avatar-picker-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
        }

        .avatar-picker-overlay.show {
            display: flex;
        }

        .avatar-picker {
            background: var(--bg-card);
            border-radius: var(--radius-xl);
            padding: 24px;
            width: 90%;
            max-width: 400px;
            box-shadow: var(--shadow-xl);
        }

        .avatar-picker-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 20px;
            text-align: center;
        }

        .avatar-picker-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        .avatar-option {
            width: 100%;
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            background: var(--bg-secondary);
            border: 2px solid transparent;
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: var(--transition);
        }

        .avatar-option:hover {
            background: var(--color-primary-bg);
            border-color: var(--color-primary-light);
        }

        .avatar-option.selected {
            background: var(--color-primary-bg);
            border-color: var(--color-primary);
        }

        .avatar-picker-actions {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
        }

        /* ‰ø°ÊÅØË°®Âçï */
        .profile-form {
            display: grid;
            gap: 20px;
        }

        .profile-form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 600px) {
            .profile-form-row {
                grid-template-columns: 1fr;
            }

            .profile-avatar-section {
                flex-direction: column;
                text-align: center;
            }
        }

        .form-input[readonly] {
            background: var(--bg-secondary);
            color: var(--text-secondary);
            cursor: not-allowed;
        }

        .profile-form-actions {
            display: flex;
            justify-content: flex-end;
            padding-top: 16px;
            border-top: 1px solid var(--border-light);
            margin-top: 4px;
        }

        /* STEP 3: Ë¥¶Êà∑ÂÆâÂÖ®Ê†∑Âºè */
        .security-content {
            max-width: 560px;
        }

        .password-form {
            max-width: 100%;
        }

        .password-input-wrapper {
            position: relative;
        }

        .password-toggle {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: transparent;
            border: none;
            color: var(--text-tertiary);
            cursor: pointer;
            border-radius: var(--radius-sm);
            transition: var(--transition);
        }

        .password-toggle:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }

        .password-toggle svg {
            width: 18px;
            height: 18px;
        }

        .password-strength {
            display: flex;
            gap: 4px;
            margin-top: 8px;
        }

        .password-strength-bar {
            flex: 1;
            height: 4px;
            background: var(--border-color);
            border-radius: 2px;
            transition: var(--transition);
        }

        .password-strength.weak .password-strength-bar:nth-child(1) {
            background: var(--color-error);
        }

        .password-strength.medium .password-strength-bar:nth-child(1),
        .password-strength.medium .password-strength-bar:nth-child(2) {
            background: var(--color-warning);
        }

        .password-strength.strong .password-strength-bar:nth-child(1),
        .password-strength.strong .password-strength-bar:nth-child(2),
        .password-strength.strong .password-strength-bar:nth-child(3) {
            background: #22c55e;
        }

        .password-strength.very-strong .password-strength-bar {
            background: var(--color-success);
        }

        .password-strength-text {
            font-size: 12px;
            margin-top: 6px;
        }

        .password-strength.weak .password-strength-text { color: var(--color-error); }
        .password-strength.medium .password-strength-text { color: var(--color-warning); }
        .password-strength.strong .password-strength-text { color: #22c55e; }
        .password-strength.very-strong .password-strength-text { color: var(--color-success); }

        /* ÈÄÄÂá∫ÁôªÂΩïÂç°Áâá */
        .logout-card {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: 24px;
            box-shadow: var(--shadow-sm);
        }

        .logout-card-title {
            font-size: 15px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 16px;
        }

        .logout-actions {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .logout-action-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px;
            border-radius: var(--radius-md);
            border: 1px solid var(--border-light);
            transition: var(--transition);
        }

        .logout-action-item:hover {
            border-color: var(--border-color);
        }

        .logout-action-item.danger {
            background: #FEF2F2;
            border-color: #FECACA;
        }

        [data-theme="dark"] .logout-action-item.danger {
            background: rgba(239, 68, 68, 0.1);
            border-color: rgba(239, 68, 68, 0.3);
        }

        .logout-action-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logout-action-icon {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius-md);
            background: var(--bg-tertiary);
        }

        .logout-action-icon svg {
            width: 20px;
            height: 20px;
            color: var(--text-secondary);
        }

        .logout-action-icon.primary {
            background: var(--color-primary-bg);
        }

        .logout-action-icon.primary svg {
            color: var(--color-primary);
        }

        .logout-action-icon.danger {
            background: #FEE2E2;
        }

        .logout-action-icon.danger svg {
            color: var(--color-error);
        }

        .logout-action-text h5 {
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 2px;
        }

        .logout-action-text p {
            font-size: 12px;
            color: var(--text-tertiary);
        }

        .logout-action-item .btn {
            flex-shrink: 0;
        }

        /* STEP 4: Â§ñËßÇËÆæÁΩÆÊ†∑Âºè */
        .theme-options {
            display: flex;
            gap: 16px;
        }

        .theme-option {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            padding: 20px;
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition: var(--transition);
        }

        .theme-option:hover {
            border-color: var(--color-primary-light);
        }

        .theme-option.active {
            border-color: var(--color-primary);
            background: var(--color-primary-bg);
        }

        .theme-preview {
            width: 100%;
            height: 80px;
            border-radius: var(--radius-md);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
        }

        .theme-preview-light {
            background: linear-gradient(180deg, #f8fafc 0%, #e2e8f0 100%);
            position: relative;
        }

        .theme-preview-light::before {
            content: '';
            position: absolute;
            top: 8px;
            left: 8px;
            right: 8px;
            height: 12px;
            background: white;
            border-radius: 4px;
        }

        .theme-preview-light::after {
            content: '';
            position: absolute;
            top: 28px;
            left: 8px;
            width: 30%;
            bottom: 8px;
            background: white;
            border-radius: 4px;
        }

        .theme-preview-dark {
            background: linear-gradient(180deg, #1e293b 0%, #0f172a 100%);
            position: relative;
        }

        .theme-preview-dark::before {
            content: '';
            position: absolute;
            top: 8px;
            left: 8px;
            right: 8px;
            height: 12px;
            background: #334155;
            border-radius: 4px;
        }

        .theme-preview-dark::after {
            content: '';
            position: absolute;
            top: 28px;
            left: 8px;
            width: 30%;
            bottom: 8px;
            background: #334155;
            border-radius: 4px;
        }

        .theme-label {
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
        }

        .theme-check {
            width: 20px;
            height: 20px;
            display: none;
            align-items: center;
            justify-content: center;
            background: var(--color-primary);
            color: white;
            border-radius: 50%;
            position: absolute;
            top: 8px;
            right: 8px;
        }

        .theme-option.active .theme-check {
            display: flex;
        }

        .theme-option {
            position: relative;
        }

        /* ËßÜÂõæÈÄâÈ°π */
        .view-options {
            display: flex;
            gap: 12px;
        }

        .view-option {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px 20px;
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition: var(--transition);
        }

        .view-option:hover {
            border-color: var(--color-primary-light);
        }

        .view-option.active {
            border-color: var(--color-primary);
            background: var(--color-primary-bg);
        }

        .view-option-icon {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-card);
            border-radius: var(--radius-md);
            color: var(--text-secondary);
        }

        .view-option.active .view-option-icon {
            background: var(--color-primary);
            color: white;
        }

        .view-option-icon svg {
            width: 20px;
            height: 20px;
        }

        .view-option-info h4 {
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 2px;
        }

        .view-option-info p {
            font-size: 12px;
            color: var(--text-secondary);
        }

        @media (max-width: 600px) {
            .theme-options,
            .view-options {
                flex-direction: column;
            }
        }

        /* STEP 5: Êï∞ÊçÆÁÆ°ÁêÜÊ†∑Âºè */
        .data-action-card {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 20px 24px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            margin-bottom: 16px;
        }

        .data-action-card:last-child {
            margin-bottom: 0;
        }

        .data-action-icon {
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-card);
            border-radius: var(--radius-md);
            flex-shrink: 0;
        }

        .data-action-icon svg {
            width: 24px;
            height: 24px;
            color: var(--color-primary);
        }

        .data-action-icon.warning svg {
            color: var(--color-warning);
        }

        .data-action-icon.danger svg {
            color: var(--color-error);
        }

        .data-action-info {
            flex: 1;
        }

        .data-action-info h4 {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .data-action-info p {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .data-action-btn {
            flex-shrink: 0;
        }

        /* Êñá‰ª∂‰∏ä‰º† */
        .file-upload-input {
            display: none;
        }

        /* Âç±Èô©Âå∫Âüü */
        .danger-zone {
            border-color: #FECACA;
            background: #FEF2F2;
        }

        [data-theme="dark"] .danger-zone {
            background: rgba(239, 68, 68, 0.1);
            border-color: rgba(239, 68, 68, 0.3);
        }

        /* Á°ÆËÆ§ÂºπÁ™ó */
        .confirm-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
        }

        .confirm-modal-overlay.show {
            display: flex;
        }

        .confirm-modal {
            background: var(--bg-card);
            border-radius: var(--radius-xl);
            padding: 32px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            box-shadow: var(--shadow-xl);
        }

        .confirm-modal-icon {
            width: 64px;
            height: 64px;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #FEE2E2;
            border-radius: 50%;
        }

        .confirm-modal-icon svg {
            width: 32px;
            height: 32px;
            color: var(--color-error);
        }

        .confirm-modal h3 {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .confirm-modal p {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 24px;
        }

        .confirm-modal-actions {
            display: flex;
            gap: 12px;
            justify-content: center;
        }

    </style>
</head>
<body>
    <div class="page-container">
        <!-- ‰æßËæπÂØºËà™ -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="index.html" class="sidebar-back">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="19" y1="12" x2="5" y2="12"></line>
                        <polyline points="12 19 5 12 12 5"></polyline>
                    </svg>
                    ËøîÂõû‰π¶Á≠æ
                </a>
                <h1 class="sidebar-title">‰∏™‰∫∫ËÆæÁΩÆ</h1>
            </div>
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-title">Ë¥¶Êà∑</div>
                    <a class="nav-item active" data-section="profile">
                        <span class="nav-item-emoji">üë§</span>
                        ‰∏™‰∫∫‰ø°ÊÅØ
                    </a>
                    <a class="nav-item" data-section="security">
                        <span class="nav-item-emoji">üîê</span>
                        Ë¥¶Êà∑ÂÆâÂÖ®
                    </a>
                </div>
                <div class="nav-section">
                    <div class="nav-section-title">ÂÅèÂ•Ω</div>
                    <a class="nav-item" data-section="appearance">
                        <span class="nav-item-emoji">üé®</span>
                        Â§ñËßÇËÆæÁΩÆ
                    </a>
                </div>
                <div class="nav-section">
                    <div class="nav-section-title">Êï∞ÊçÆ</div>
                    <a class="nav-item" data-section="data">
                        <span class="nav-item-emoji">üì¶</span>
                        Êï∞ÊçÆÁÆ°ÁêÜ
                    </a>
                </div>
            </nav>
        </aside>

        <!-- ÈÅÆÁΩ©Â±Ç -->
        <div class="overlay" id="overlay"></div>

        <!-- ‰∏ªÂÜÖÂÆπÂå∫ -->
        <main class="main-content">
            <!-- ÁßªÂä®Á´ØÂ§¥ÈÉ® -->
            <div class="mobile-header">
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <line x1="3" y1="18" x2="21" y2="18"></line>
                    </svg>
                </button>
                <h2 style="font-size: 18px; font-weight: 600;">‰∏™‰∫∫ËÆæÁΩÆ</h2>
            </div>

            <!-- ‰∏™‰∫∫‰ø°ÊÅØÂå∫Âüü -->
            <section class="section-content active" id="profileSection">
                <div class="content-header">
                    <h2 class="content-title">‰∏™‰∫∫‰ø°ÊÅØ</h2>
                    <p class="content-subtitle">ÁÆ°ÁêÜÊÇ®ÁöÑË¥¶Êà∑Âü∫Êú¨‰ø°ÊÅØ</p>
                </div>

                <div class="settings-card">
                    <!-- Â§¥ÂÉèÂå∫Âüü -->
                    <div class="profile-avatar-section">
                        <div class="profile-avatar" id="avatarBtn" title="ÁÇπÂáªÊõ¥Êç¢Â§¥ÂÉè">
                            <span id="currentAvatar">üòä</span>
                            <div class="profile-avatar-edit">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                </svg>
                            </div>
                        </div>
                        <div class="profile-avatar-info">
                            <h3 id="profileDisplayName">Áî®Êà∑</h3>
                            <p>ÁÇπÂáªÂ§¥ÂÉèÊõ¥Êç¢</p>
                        </div>
                    </div>

                    <!-- ‰ø°ÊÅØË°®Âçï -->
                    <form class="profile-form" id="profileForm">
                        <div class="profile-form-row">
                            <div class="form-group">
                                <label class="form-label" for="profileUsername">Áî®Êà∑Âêç</label>
                                <input type="text" id="profileUsername" class="form-input" placeholder="ËæìÂÖ•Áî®Êà∑Âêç" maxlength="20">
                                <div class="form-hint">4-20‰∏™Â≠óÁ¨¶ÔºåÊîØÊåÅ‰∏≠Ëã±Êñá„ÄÅÊï∞Â≠ó„ÄÅ‰∏ãÂàíÁ∫ø</div>
                                <div class="form-error" id="usernameError">Áî®Êà∑ÂêçÊ†ºÂºè‰∏çÊ≠£Á°Æ</div>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="profileEmail">ÈÇÆÁÆ±</label>
                                <input type="email" id="profileEmail" class="form-input" placeholder="ËæìÂÖ•ÈÇÆÁÆ±Âú∞ÂùÄ">
                                <div class="form-hint">Áî®‰∫éÊé•Êî∂ÈÄöÁü•ÔºàÈÄâÂ°´Ôºâ</div>
                                <div class="form-error" id="emailError">ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑÈÇÆÁÆ±Âú∞ÂùÄ</div>
                            </div>
                        </div>
                        <div class="profile-form-row">
                            <div class="form-group">
                                <label class="form-label" for="profileCreatedAt">Ê≥®ÂÜåÊó∂Èó¥</label>
                                <input type="text" id="profileCreatedAt" class="form-input" readonly>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="profileBookmarkCount">‰π¶Á≠æÊï∞Èáè</label>
                                <input type="text" id="profileBookmarkCount" class="form-input" readonly>
                            </div>
                        </div>
                        <div class="profile-form-actions">
                            <button type="submit" class="btn btn-primary">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                                    <polyline points="17 21 17 13 7 13 7 21"></polyline>
                                    <polyline points="7 3 7 8 15 8"></polyline>
                                </svg>
                                ‰øùÂ≠ò‰øÆÊîπ
                            </button>
                        </div>
                    </form>
                </div>
            </section>

            <!-- Ë¥¶Êà∑ÂÆâÂÖ®Âå∫Âüü -->
            <section class="section-content" id="securitySection">
                <div class="content-header">
                    <h2 class="content-title">Ë¥¶Êà∑ÂÆâÂÖ®</h2>
                    <p class="content-subtitle">‰øùÊä§ÊÇ®ÁöÑË¥¶Êà∑ÂÆâÂÖ®</p>
                </div>

                <div class="security-content">
                <!-- ‰øÆÊîπÂØÜÁ†Å -->
                <div class="settings-card">
                    <h3 class="settings-card-title">‰øÆÊîπÂØÜÁ†Å</h3>
                    <form class="password-form" id="passwordForm">
                        <div class="form-group">
                            <label class="form-label" for="currentPassword">ÂΩìÂâçÂØÜÁ†Å</label>
                            <div class="password-input-wrapper">
                                <input type="password" id="currentPassword" class="form-input" placeholder="ËæìÂÖ•ÂΩìÂâçÂØÜÁ†Å" style="padding-right: 48px;">
                                <button type="button" class="password-toggle" data-target="currentPassword">
                                    <svg class="eye-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                        <circle cx="12" cy="12" r="3"></circle>
                                    </svg>
                                </button>
                            </div>
                            <div class="form-error" id="currentPasswordError">ÂΩìÂâçÂØÜÁ†Å‰∏çÊ≠£Á°Æ</div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="newPassword">Êñ∞ÂØÜÁ†Å</label>
                            <div class="password-input-wrapper">
                                <input type="password" id="newPassword" class="form-input" placeholder="ËæìÂÖ•Êñ∞ÂØÜÁ†ÅÔºà6-20‰∏™Â≠óÁ¨¶Ôºâ" style="padding-right: 48px;">
                                <button type="button" class="password-toggle" data-target="newPassword">
                                    <svg class="eye-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                        <circle cx="12" cy="12" r="3"></circle>
                                    </svg>
                                </button>
                            </div>
                            <div class="password-strength" id="passwordStrength">
                                <div class="password-strength-bar"></div>
                                <div class="password-strength-bar"></div>
                                <div class="password-strength-bar"></div>
                                <div class="password-strength-bar"></div>
                            </div>
                            <div class="password-strength-text" id="passwordStrengthText"></div>
                            <div class="form-error" id="newPasswordError">ÂØÜÁ†ÅÈïøÂ∫¶Â∫î‰∏∫6-20‰∏™Â≠óÁ¨¶</div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="confirmPassword">Á°ÆËÆ§Êñ∞ÂØÜÁ†Å</label>
                            <div class="password-input-wrapper">
                                <input type="password" id="confirmPassword" class="form-input" placeholder="ÂÜçÊ¨°ËæìÂÖ•Êñ∞ÂØÜÁ†Å" style="padding-right: 48px;">
                                <button type="button" class="password-toggle" data-target="confirmPassword">
                                    <svg class="eye-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                        <circle cx="12" cy="12" r="3"></circle>
                                    </svg>
                                </button>
                            </div>
                            <div class="form-error" id="confirmPasswordError">‰∏§Ê¨°ËæìÂÖ•ÁöÑÂØÜÁ†Å‰∏ç‰∏ÄËá¥</div>
                        </div>

                        <div class="profile-form-actions">
                            <button type="submit" class="btn btn-primary">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                    <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                                </svg>
                                Êõ¥Êñ∞ÂØÜÁ†Å
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Ë¥¶Êà∑Êìç‰Ωú -->
                <div class="logout-card">
                    <h3 class="logout-card-title">Ë¥¶Êà∑Êìç‰Ωú</h3>
                    <div class="logout-actions">
                        <!-- ÈÄÄÂá∫ÁôªÂΩï -->
                        <div class="logout-action-item">
                            <div class="logout-action-info">
                                <div class="logout-action-icon primary">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                        <polyline points="16 17 21 12 16 7"></polyline>
                                        <line x1="21" y1="12" x2="9" y2="12"></line>
                                    </svg>
                                </div>
                                <div class="logout-action-text">
                                    <h5>ÈÄÄÂá∫ÁôªÂΩï</h5>
                                    <p>ÈÄÄÂá∫ÂêéÈúÄË¶ÅÈáçÊñ∞ÁôªÂΩïÊâçËÉΩËÆøÈóÆ</p>
                                </div>
                            </div>
                            <button class="btn btn-secondary" id="logoutBtn">
                                ÈÄÄÂá∫ÁôªÂΩï
                            </button>
                        </div>
                        <!-- Ê≥®ÈîÄË¥¶Êà∑ -->
                        <div class="logout-action-item danger">
                            <div class="logout-action-info">
                                <div class="logout-action-icon danger">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M3 6h18"></path>
                                        <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
                                        <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
                                        <line x1="10" y1="11" x2="10" y2="17"></line>
                                        <line x1="14" y1="11" x2="14" y2="17"></line>
                                    </svg>
                                </div>
                                <div class="logout-action-text">
                                    <h5>Ê≥®ÈîÄË¥¶Êà∑</h5>
                                    <p>Ê∞∏‰πÖÂà†Èô§Ë¥¶Êà∑ÂèäÊâÄÊúâÊï∞ÊçÆÔºåÊó†Ê≥ïÊÅ¢Â§ç</p>
                                </div>
                            </div>
                            <button class="btn btn-danger" id="deleteAccountBtn">
                                Ê≥®ÈîÄË¥¶Êà∑
                            </button>
                        </div>
                    </div>
                </div>
                </div>
            </section>

            <!-- Â§ñËßÇËÆæÁΩÆÂå∫Âüü -->
            <section class="section-content" id="appearanceSection">
                <div class="content-header">
                    <h2 class="content-title">Â§ñËßÇËÆæÁΩÆ</h2>
                    <p class="content-subtitle">Ëá™ÂÆö‰πâÊÇ®ÁöÑ‰ΩøÁî®‰ΩìÈ™å</p>
                </div>

                <!-- ‰∏ªÈ¢òËÆæÁΩÆ -->
                <div class="settings-card">
                    <h3 class="settings-card-title">‰∏ªÈ¢òÊ®°Âºè</h3>
                    <div class="theme-options">
                        <div class="theme-option active" data-theme="light">
                            <div class="theme-check">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" width="12" height="12">
                                    <polyline points="20 6 9 17 4 12"></polyline>
                                </svg>
                            </div>
                            <div class="theme-preview theme-preview-light"></div>
                            <span class="theme-label">‚òÄÔ∏è ÊµÖËâ≤Ê®°Âºè</span>
                        </div>
                        <div class="theme-option" data-theme="dark">
                            <div class="theme-check">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" width="12" height="12">
                                    <polyline points="20 6 9 17 4 12"></polyline>
                                </svg>
                            </div>
                            <div class="theme-preview theme-preview-dark"></div>
                            <span class="theme-label">üåô Ê∑±Ëâ≤Ê®°Âºè</span>
                        </div>
                    </div>
                </div>

                <!-- ÈªòËÆ§ËßÜÂõæ -->
                <div class="settings-card">
                    <h3 class="settings-card-title">ÈªòËÆ§ËßÜÂõæ</h3>
                    <div class="view-options">
                        <div class="view-option active" data-view="grid">
                            <div class="view-option-icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="3" width="7" height="7"></rect>
                                    <rect x="14" y="3" width="7" height="7"></rect>
                                    <rect x="14" y="14" width="7" height="7"></rect>
                                    <rect x="3" y="14" width="7" height="7"></rect>
                                </svg>
                            </div>
                            <div class="view-option-info">
                                <h4>ÁΩëÊ†ºËßÜÂõæ</h4>
                                <p>‰ª•Âç°ÁâáÂΩ¢ÂºèÂ±ïÁ§∫‰π¶Á≠æ</p>
                            </div>
                        </div>
                        <div class="view-option" data-view="list">
                            <div class="view-option-icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="8" y1="6" x2="21" y2="6"></line>
                                    <line x1="8" y1="12" x2="21" y2="12"></line>
                                    <line x1="8" y1="18" x2="21" y2="18"></line>
                                    <line x1="3" y1="6" x2="3.01" y2="6"></line>
                                    <line x1="3" y1="12" x2="3.01" y2="12"></line>
                                    <line x1="3" y1="18" x2="3.01" y2="18"></line>
                                </svg>
                            </div>
                            <div class="view-option-info">
                                <h4>ÂàóË°®ËßÜÂõæ</h4>
                                <p>‰ª•ÂàóË°®ÂΩ¢ÂºèÂ±ïÁ§∫‰π¶Á≠æ</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Êï∞ÊçÆÁÆ°ÁêÜÂå∫Âüü -->
            <section class="section-content" id="dataSection">
                <div class="content-header">
                    <h2 class="content-title">Êï∞ÊçÆÁÆ°ÁêÜ</h2>
                    <p class="content-subtitle">ÂØºÂÖ•„ÄÅÂØºÂá∫ÂíåÁÆ°ÁêÜÊÇ®ÁöÑÊï∞ÊçÆ</p>
                </div>

                <!-- ÂØºÂá∫ÂØºÂÖ• -->
                <div class="settings-card">
                    <h3 class="settings-card-title">ÂØºÂá∫‰∏éÂØºÂÖ•</h3>

                    <!-- ÂØºÂá∫‰π¶Á≠æ -->
                    <div class="data-action-card">
                        <div class="data-action-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="7 10 12 15 17 10"></polyline>
                                <line x1="12" y1="15" x2="12" y2="3"></line>
                            </svg>
                        </div>
                        <div class="data-action-info">
                            <h4>ÂØºÂá∫‰π¶Á≠æ</h4>
                            <p>Â∞ÜÊâÄÊúâ‰π¶Á≠æÂíåÂàÜÁ±ªÂØºÂá∫‰∏∫ JSON Êñá‰ª∂</p>
                        </div>
                        <button class="btn btn-secondary data-action-btn" id="exportBtn">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="7 10 12 15 17 10"></polyline>
                                <line x1="12" y1="15" x2="12" y2="3"></line>
                            </svg>
                            ÂØºÂá∫
                        </button>
                    </div>

                    <!-- ÂØºÂÖ•‰π¶Á≠æ -->
                    <div class="data-action-card">
                        <div class="data-action-icon warning">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="17 8 12 3 7 8"></polyline>
                                <line x1="12" y1="3" x2="12" y2="15"></line>
                            </svg>
                        </div>
                        <div class="data-action-info">
                            <h4>ÂØºÂÖ•‰π¶Á≠æ</h4>
                            <p>‰ªé JSON Êñá‰ª∂ÂØºÂÖ•‰π¶Á≠æÂíåÂàÜÁ±ªÔºàËøΩÂä†Âà∞Áé∞ÊúâÊï∞ÊçÆÔºâ</p>
                        </div>
                        <input type="file" id="importFile" class="file-upload-input" accept=".json">
                        <button class="btn btn-secondary data-action-btn" id="importBtn">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="17 8 12 3 7 8"></polyline>
                                <line x1="12" y1="3" x2="12" y2="15"></line>
                            </svg>
                            ÂØºÂÖ•
                        </button>
                    </div>
                </div>

                <!-- Âç±Èô©Âå∫Âüü -->
                <div class="settings-card">
                    <h3 class="settings-card-title" style="color: var(--color-error);">‚ö†Ô∏è Âç±Èô©Âå∫Âüü</h3>

                    <div class="data-action-card danger-zone">
                        <div class="data-action-icon danger">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="3 6 5 6 21 6"></polyline>
                                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                <line x1="10" y1="11" x2="10" y2="17"></line>
                                <line x1="14" y1="11" x2="14" y2="17"></line>
                            </svg>
                        </div>
                        <div class="data-action-info">
                            <h4>Ê∏ÖÁ©∫ÊâÄÊúâÊï∞ÊçÆ</h4>
                            <p>Âà†Èô§ÊâÄÊúâ‰π¶Á≠æÂíåÂàÜÁ±ªÔºåÊ≠§Êìç‰Ωú‰∏çÂèØÊí§ÈîÄ</p>
                        </div>
                        <button class="btn btn-danger data-action-btn" id="clearDataBtn">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                                <polyline points="3 6 5 6 21 6"></polyline>
                                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                            </svg>
                            Ê∏ÖÁ©∫Êï∞ÊçÆ
                        </button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Â§¥ÂÉèÈÄâÊã©Âô®ÂºπÁ™ó -->
    <div class="avatar-picker-overlay" id="avatarPickerOverlay">
        <div class="avatar-picker">
            <h3 class="avatar-picker-title">ÈÄâÊã©Â§¥ÂÉè</h3>
            <div class="avatar-picker-grid" id="avatarGrid">
                <button type="button" class="avatar-option" data-avatar="üòä">üòä</button>
                <button type="button" class="avatar-option" data-avatar="üòé">üòé</button>
                <button type="button" class="avatar-option" data-avatar="ü§ó">ü§ó</button>
                <button type="button" class="avatar-option" data-avatar="ü§©">ü§©</button>
                <button type="button" class="avatar-option" data-avatar="ü§ì">ü§ì</button>
                <button type="button" class="avatar-option" data-avatar="üòç">üòç</button>
                <button type="button" class="avatar-option" data-avatar="üòÑ">üòÑ</button>
                <button type="button" class="avatar-option" data-avatar="ü§†">ü§†</button>
                <button type="button" class="avatar-option" data-avatar="üëª">üëª</button>
                <button type="button" class="avatar-option" data-avatar="üëΩ">üëΩ</button>
                <button type="button" class="avatar-option" data-avatar="ü§ñ">ü§ñ</button>
                <button type="button" class="avatar-option" data-avatar="üê±">üê±</button>
                <button type="button" class="avatar-option" data-avatar="üê∂">üê∂</button>
                <button type="button" class="avatar-option" data-avatar="ü¶ä">ü¶ä</button>
                <button type="button" class="avatar-option" data-avatar="üêº">üêº</button>
                <button type="button" class="avatar-option" data-avatar="ü¶Å">ü¶Å</button>
                <button type="button" class="avatar-option" data-avatar="ü¶Ñ">ü¶Ñ</button>
                <button type="button" class="avatar-option" data-avatar="üêß">üêß</button>
            </div>
            <div class="avatar-picker-actions">
                <button type="button" class="btn btn-secondary" id="avatarCancelBtn">ÂèñÊ∂à</button>
                <button type="button" class="btn btn-primary" id="avatarConfirmBtn">Á°ÆÂÆö</button>
            </div>
        </div>
    </div>

    <!-- Toast ÂÆπÂô® -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- ÂºïÂÖ• API ÊúçÂä° -->
    <script src="js/api.js"></script>
    <script>
        // ========================================
        // STEP 1: Âü∫Á°ÄÁªìÊûÑ + Â∏ÉÂ±ÄÊ°ÜÊû∂
        // ========================================

        // API ÊúçÂä°Â∑≤Âú® js/api.js ‰∏≠ÂÆö‰πâ

        // Âø´Êç∑ÈÄâÊã©Âô®
        const $ = (selector) => document.querySelector(selector);
        const $$ = (selector) => document.querySelectorAll(selector);

        // ‰æßËæπÊ†èÂÖÉÁ¥†
        const sidebar = $('#sidebar');
        const overlay = $('#overlay');

        // Ê£ÄÊü•ÁôªÂΩïÁä∂ÊÄÅ
        function checkAuth() {
            const token = localStorage.getItem('token');
            if (!token) {
                window.location.href = 'login.html';
                return false;
            }
            return true;
        }

        // Toast ÊèêÁ§∫
        function showToast(message, type = 'success') {
            const container = $('#toastContainer');
            const icons = {
                success: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>',
                error: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>',
                warning: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>'
            };

            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `
                <div class="toast-icon">${icons[type]}</div>
                <div class="toast-message">${message}</div>
            `;

            container.appendChild(toast);

            setTimeout(() => {
                toast.style.animation = 'slideIn 0.3s ease reverse';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // ÂØºËà™ÂàáÊç¢
        $$('.nav-item[data-section]').forEach(item => {
            item.addEventListener('click', () => {
                const section = item.dataset.section;

                // Êõ¥Êñ∞ÂØºËà™Áä∂ÊÄÅ
                $$('.nav-item').forEach(nav => nav.classList.remove('active'));
                item.classList.add('active');

                // Êõ¥Êñ∞ÂÜÖÂÆπÂå∫Âüü
                $$('.section-content').forEach(sec => sec.classList.remove('active'));
                $(`#${section}Section`).classList.add('active');

                // ÁßªÂä®Á´ØÂÖ≥Èó≠‰æßËæπÊ†è
                if (window.innerWidth <= 768) {
                    sidebar.classList.remove('show');
                    overlay.classList.remove('show');
                }
            });
        });

        // ÁßªÂä®Á´ØËèúÂçï
        $('#mobileMenuBtn').addEventListener('click', () => {
            sidebar.classList.add('show');
            overlay.classList.add('show');
        });

        overlay.addEventListener('click', () => {
            sidebar.classList.remove('show');
            overlay.classList.remove('show');
        });

        // È°µÈù¢Âä†ËΩΩ
        window.addEventListener('DOMContentLoaded', () => {
            if (checkAuth()) {
                loadProfileData();
            }
        });

        // ========================================
        // STEP 2: ‰∏™‰∫∫‰ø°ÊÅØÈÄªËæë
        // ========================================

        let selectedAvatar = 'üòä';

        // Âä†ËΩΩ‰∏™‰∫∫‰ø°ÊÅØÊï∞ÊçÆ
        async function loadProfileData() {
            // ÂÖà‰ΩøÁî®Êú¨Âú∞ÁºìÂ≠òÂø´ÈÄüÊòæÁ§∫
            const cachedUser = JSON.parse(localStorage.getItem('currentUser') || '{}');
            updateProfileUI(cachedUser);

            // ÁÑ∂Âêé‰ªéÂêéÁ´ØËé∑ÂèñÊúÄÊñ∞Êï∞ÊçÆ
            try {
                const [userResponse, statsResponse] = await Promise.all([
                    API.auth.getCurrentUser(),
                    API.statistics.get()
                ]);

                if (userResponse.success && userResponse.data) {
                    const currentUser = userResponse.data;
                    // Êõ¥Êñ∞Êú¨Âú∞ÁºìÂ≠ò
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    updateProfileUI(currentUser);
                }

                if (statsResponse.success && statsResponse.data) {
                    $('#profileBookmarkCount').value = `${statsResponse.data.totalBookmarks || 0} ‰∏™`;
                }
            } catch (error) {
                console.log('‰ªéÂêéÁ´ØËé∑ÂèñÁî®Êà∑‰ø°ÊÅØÂ§±Ë¥•Ôºå‰ΩøÁî®ÁºìÂ≠òÊï∞ÊçÆ');
            }
        }

        // Êõ¥Êñ∞‰∏™‰∫∫ËµÑÊñôUI
        function updateProfileUI(currentUser) {
            // Â°´ÂÖÖË°®ÂçïÊï∞ÊçÆ
            $('#profileUsername').value = currentUser.username || '';
            $('#profileEmail').value = currentUser.email || '';
            $('#profileCreatedAt').value = formatDate(currentUser.createdAt) || 'Êú™Áü•';

            // ËÆæÁΩÆÂ§¥ÂÉè
            selectedAvatar = currentUser.avatar || 'üòä';
            $('#currentAvatar').textContent = selectedAvatar;
            $('#profileDisplayName').textContent = currentUser.username || 'Áî®Êà∑';

            // È´ò‰∫ÆÂΩìÂâçÂ§¥ÂÉè
            updateAvatarSelection();
        }

        // Ê†ºÂºèÂåñÊó•Êúü
        function formatDate(dateStr) {
            if (!dateStr) return null;
            const date = new Date(dateStr);
            return `${date.getFullYear()}Âπ¥${date.getMonth() + 1}Êúà${date.getDate()}Êó•`;
        }

        // Êõ¥Êñ∞Â§¥ÂÉèÈÄâ‰∏≠Áä∂ÊÄÅ
        function updateAvatarSelection() {
            $$('#avatarGrid .avatar-option').forEach(opt => {
                opt.classList.toggle('selected', opt.dataset.avatar === selectedAvatar);
            });
        }

        // Â§¥ÂÉèÈÄâÊã©Âô®
        const avatarPickerOverlay = $('#avatarPickerOverlay');

        $('#avatarBtn').addEventListener('click', () => {
            avatarPickerOverlay.classList.add('show');
        });

        $('#avatarCancelBtn').addEventListener('click', () => {
            avatarPickerOverlay.classList.remove('show');
            // ÊÅ¢Â§ç‰πãÂâçÁöÑÈÄâ‰∏≠Áä∂ÊÄÅ
            const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');
            selectedAvatar = currentUser.avatar || 'üòä';
            updateAvatarSelection();
        });

        avatarPickerOverlay.addEventListener('click', (e) => {
            if (e.target === avatarPickerOverlay) {
                $('#avatarCancelBtn').click();
            }
        });

        // Â§¥ÂÉèÈÄâÈ°πÁÇπÂáª
        $$('#avatarGrid .avatar-option').forEach(opt => {
            opt.addEventListener('click', () => {
                selectedAvatar = opt.dataset.avatar;
                updateAvatarSelection();
            });
        });

        // Á°ÆËÆ§ÈÄâÊã©Â§¥ÂÉè
        $('#avatarConfirmBtn').addEventListener('click', () => {
            $('#currentAvatar').textContent = selectedAvatar;
            avatarPickerOverlay.classList.remove('show');
        });

        // ‰øùÂ≠ò‰∏™‰∫∫‰ø°ÊÅØ
        $('#profileForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const username = $('#profileUsername').value.trim();
            const email = $('#profileEmail').value.trim();
            let hasError = false;

            // È™åËØÅÁî®Êà∑Âêç
            if (!username || username.length < 4 || username.length > 20) {
                $('#profileUsername').closest('.form-group').classList.add('error');
                $('#usernameError').textContent = 'Áî®Êà∑ÂêçÈïøÂ∫¶Â∫î‰∏∫4-20‰∏™Â≠óÁ¨¶';
                hasError = true;
            }

            // È™åËØÅÈÇÆÁÆ±ÔºàÂ¶ÇÊûúÂ°´ÂÜô‰∫ÜÁöÑËØùÔºâ
            if (email && !isValidEmail(email)) {
                $('#profileEmail').closest('.form-group').classList.add('error');
                hasError = true;
            }

            if (hasError) {
                showToast('ËØ∑Ê£ÄÊü•ËæìÂÖ•ÂÜÖÂÆπ', 'error');
                return;
            }

            // Ë∞ÉÁî®ÂêéÁ´Ø API Êõ¥Êñ∞Áî®Êà∑‰ø°ÊÅØ
            try {
                const response = await API.auth.updateProfile({
                    username: username,
                    email: email || null,
                    avatar: selectedAvatar
                });

                if (response.success) {
                    // Êõ¥Êñ∞Êú¨Âú∞ÁºìÂ≠ò
                    const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');
                    currentUser.username = username;
                    currentUser.email = email || '';
                    currentUser.avatar = selectedAvatar;
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));

                    // Êõ¥Êñ∞ÊòæÁ§∫
                    $('#profileDisplayName').textContent = username;
                    showToast('‰∏™‰∫∫‰ø°ÊÅØÂ∑≤Êõ¥Êñ∞', 'success');
                } else {
                    showToast(response.message || 'Êõ¥Êñ∞Â§±Ë¥•', 'error');
                }
            } catch (error) {
                console.error('Êõ¥Êñ∞‰∏™‰∫∫‰ø°ÊÅØÂ§±Ë¥•:', error);
                showToast('ÁΩëÁªúÈîôËØØÔºåËØ∑Á®çÂêéÈáçËØï', 'error');
            }
        });

        // È™åËØÅÈÇÆÁÆ±Ê†ºÂºè
        function isValidEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }

        // ËæìÂÖ•Êó∂Ê∏ÖÈô§ÈîôËØØÁä∂ÊÄÅ
        $('#profileUsername').addEventListener('input', () => {
            $('#profileUsername').closest('.form-group').classList.remove('error');
        });

        $('#profileEmail').addEventListener('input', () => {
            $('#profileEmail').closest('.form-group').classList.remove('error');
        });

        // ========================================
        // STEP 3: Ë¥¶Êà∑ÂÆâÂÖ®ÈÄªËæë
        // ========================================

        // ÂØÜÁ†ÅÊòæÁ§∫/ÈöêËóèÂàáÊç¢
        $$('.password-toggle').forEach(btn => {
            btn.addEventListener('click', () => {
                const targetId = btn.dataset.target;
                const input = $(`#${targetId}`);
                const isPassword = input.type === 'password';
                
                input.type = isPassword ? 'text' : 'password';
                
                // ÂàáÊç¢ÂõæÊ†á
                btn.innerHTML = isPassword 
                    ? '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line></svg>'
                    : '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>';
            });
        });

        // ÂØÜÁ†ÅÂº∫Â∫¶Ê£ÄÊµã
        $('#newPassword').addEventListener('input', () => {
            const password = $('#newPassword').value;
            const strength = checkPasswordStrength(password);
            const strengthEl = $('#passwordStrength');
            const textEl = $('#passwordStrengthText');

            // ÁßªÈô§ÊâÄÊúâÂº∫Â∫¶Á±ª
            strengthEl.className = 'password-strength';

            if (password.length === 0) {
                textEl.textContent = '';
                return;
            }

            strengthEl.classList.add(strength.level);
            textEl.textContent = strength.text;

            // Ê∏ÖÈô§ÈîôËØØÁä∂ÊÄÅ
            $('#newPassword').closest('.form-group').classList.remove('error');
        });

        function checkPasswordStrength(password) {
            let score = 0;
            
            if (password.length >= 6) score++;
            if (password.length >= 10) score++;
            if (/[a-z]/.test(password) && /[A-Z]/.test(password)) score++;
            if (/\d/.test(password)) score++;
            if (/[!@#$%^&*(),.?":{}|<>]/.test(password)) score++;

            if (score <= 1) return { level: 'weak', text: 'Âº± - Âª∫ËÆÆ‰ΩøÁî®Êõ¥Â§çÊùÇÁöÑÂØÜÁ†Å' };
            if (score === 2) return { level: 'medium', text: '‰∏≠ - ÂèØ‰ª•Êõ¥Âº∫' };
            if (score === 3) return { level: 'strong', text: 'Âº∫ - ÂÆâÂÖ®ÊÄßËæÉÂ•Ω' };
            return { level: 'very-strong', text: 'ÈùûÂ∏∏Âº∫ - ÂÆâÂÖ®ÊÄßÊûÅ‰Ω≥' };
        }

        // Á°ÆËÆ§ÂØÜÁ†ÅÈ™åËØÅ
        $('#confirmPassword').addEventListener('input', () => {
            $('#confirmPassword').closest('.form-group').classList.remove('error');
        });

        // ÂΩìÂâçÂØÜÁ†ÅËæìÂÖ•
        $('#currentPassword').addEventListener('input', () => {
            $('#currentPassword').closest('.form-group').classList.remove('error');
        });

        // ‰øÆÊîπÂØÜÁ†ÅË°®ÂçïÊèê‰∫§
        $('#passwordForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const currentPassword = $('#currentPassword').value;
            const newPassword = $('#newPassword').value;
            const confirmPassword = $('#confirmPassword').value;
            let hasError = false;

            // È™åËØÅÂΩìÂâçÂØÜÁ†Å
            if (!currentPassword) {
                $('#currentPassword').closest('.form-group').classList.add('error');
                $('#currentPasswordError').textContent = 'ËØ∑ËæìÂÖ•ÂΩìÂâçÂØÜÁ†Å';
                hasError = true;
            }

            // È™åËØÅÊñ∞ÂØÜÁ†Å
            if (!newPassword || newPassword.length < 6 || newPassword.length > 20) {
                $('#newPassword').closest('.form-group').classList.add('error');
                hasError = true;
            }

            // È™åËØÅÁ°ÆËÆ§ÂØÜÁ†Å
            if (newPassword !== confirmPassword) {
                $('#confirmPassword').closest('.form-group').classList.add('error');
                hasError = true;
            }

            // Êñ∞ÂØÜÁ†Å‰∏çËÉΩ‰∏éÊóßÂØÜÁ†ÅÁõ∏Âêå
            if (newPassword === currentPassword) {
                $('#newPassword').closest('.form-group').classList.add('error');
                $('#newPasswordError').textContent = 'Êñ∞ÂØÜÁ†Å‰∏çËÉΩ‰∏éÂΩìÂâçÂØÜÁ†ÅÁõ∏Âêå';
                hasError = true;
            }

            if (hasError) {
                showToast('ËØ∑Ê£ÄÊü•ËæìÂÖ•ÂÜÖÂÆπ', 'error');
                return;
            }

            // Ë∞ÉÁî®ÂêéÁ´Ø API ‰øÆÊîπÂØÜÁ†Å
            try {
                const response = await API.auth.changePassword(currentPassword, newPassword);

                if (response.success) {
                    // Ê∏ÖÁ©∫Ë°®Âçï
                    $('#passwordForm').reset();
                    $('#passwordStrength').className = 'password-strength';
                    $('#passwordStrengthText').textContent = '';
                    showToast('ÂØÜÁ†Å‰øÆÊîπÊàêÂäü', 'success');
                } else {
                    if (response.message && response.message.includes('ÂØÜÁ†Å')) {
                        $('#currentPassword').closest('.form-group').classList.add('error');
                        $('#currentPasswordError').textContent = response.message;
                    }
                    showToast(response.message || 'ÂØÜÁ†Å‰øÆÊîπÂ§±Ë¥•', 'error');
                }
            } catch (error) {
                console.error('‰øÆÊîπÂØÜÁ†ÅÂ§±Ë¥•:', error);
                showToast('ÁΩëÁªúÈîôËØØÔºåËØ∑Á®çÂêéÈáçËØï', 'error');
            }
        });

        // ÈÄÄÂá∫ÁôªÂΩï
        $('#logoutBtn').addEventListener('click', () => {
            showLogoutConfirmModal();
        });

        // ÈÄÄÂá∫ÁôªÂΩïÁ°ÆËÆ§ÂºπÁ™ó
        function showLogoutConfirmModal() {
            const modal = document.createElement('div');
            modal.className = 'confirm-modal-overlay show';
            modal.id = 'logoutConfirmModal';
            modal.innerHTML = `
                <div class="confirm-modal">
                    <div class="confirm-modal-icon" style="background: #DBEAFE;">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color: var(--color-primary);">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                            <polyline points="16 17 21 12 16 7"></polyline>
                            <line x1="21" y1="12" x2="9" y2="12"></line>
                        </svg>
                    </div>
                    <h3>Á°ÆËÆ§ÈÄÄÂá∫ÁôªÂΩïÔºü</h3>
                    <p>ÈÄÄÂá∫ÂêéÈúÄË¶ÅÈáçÊñ∞ÁôªÂΩïÊâçËÉΩËÆøÈóÆÊÇ®ÁöÑ‰π¶Á≠æÊï∞ÊçÆ„ÄÇ</p>
                    <div class="confirm-modal-actions">
                        <button class="btn btn-secondary" id="logoutCancelBtn">ÂèñÊ∂à</button>
                        <button class="btn btn-primary" id="logoutConfirmBtn">Á°ÆËÆ§ÈÄÄÂá∫</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);

            // ÁªëÂÆö‰∫ã‰ª∂
            $('#logoutCancelBtn').addEventListener('click', () => modal.remove());
            modal.addEventListener('click', (e) => {
                if (e.target === modal) modal.remove();
            });

            $('#logoutConfirmBtn').addEventListener('click', async () => {
                try {
                    await API.auth.logout();
                } catch (e) {
                    console.log('ÈÄÄÂá∫ÁôªÂΩïAPIË∞ÉÁî®Â§±Ë¥•ÔºåÁªßÁª≠Ê∏ÖÁêÜÊú¨Âú∞Áä∂ÊÄÅ');
                }
                API.clearToken();
                modal.remove();
                showToast('Â∑≤ÈÄÄÂá∫ÁôªÂΩï', 'success');
                setTimeout(() => {
                    window.location.href = 'login.html';
                }, 800);
            });
        }

        // Ê≥®ÈîÄË¥¶Êà∑
        $('#deleteAccountBtn').addEventListener('click', () => {
            showDeleteAccountModal();
        });

        // Ê≥®ÈîÄË¥¶Êà∑Á°ÆËÆ§ÂºπÁ™ó
        function showDeleteAccountModal() {
            const modal = document.createElement('div');
            modal.className = 'confirm-modal-overlay show';
            modal.id = 'deleteAccountModal';
            modal.innerHTML = `
                <div class="confirm-modal">
                    <div class="confirm-modal-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                            <line x1="12" y1="9" x2="12" y2="13"></line>
                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                        </svg>
                    </div>
                    <h3>Á°ÆËÆ§Ê≥®ÈîÄË¥¶Êà∑Ôºü</h3>
                    <p>Ê≠§Êìç‰ΩúÂ∞ÜÊ∞∏‰πÖÂà†Èô§ÊÇ®ÁöÑË¥¶Êà∑ÂèäÊâÄÊúâ‰π¶Á≠æÊï∞ÊçÆÔºå‰∏îÊó†Ê≥ïÊÅ¢Â§ç„ÄÇËØ∑Ë∞®ÊÖéÊìç‰ΩúÔºÅ</p>
                    <div class="form-group" style="margin: 16px 0 24px; text-align: left;">
                        <label class="form-label">ËØ∑ËæìÂÖ•ÂØÜÁ†ÅÁ°ÆËÆ§Ë∫´‰ªΩ</label>
                        <input type="password" class="form-input" id="deleteAccountPassword" placeholder="ËæìÂÖ•ÂΩìÂâçÂØÜÁ†Å">
                    </div>
                    <div class="confirm-modal-actions">
                        <button class="btn btn-secondary" id="deleteAccountCancelBtn">ÂèñÊ∂à</button>
                        <button class="btn btn-danger" id="deleteAccountConfirmBtn">Á°ÆËÆ§Ê≥®ÈîÄ</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);

            // ÁªëÂÆö‰∫ã‰ª∂
            $('#deleteAccountCancelBtn').addEventListener('click', () => modal.remove());
            modal.addEventListener('click', (e) => {
                if (e.target === modal) modal.remove();
            });

            $('#deleteAccountConfirmBtn').addEventListener('click', async () => {
                const password = $('#deleteAccountPassword').value;
                if (!password) {
                    showToast('ËØ∑ËæìÂÖ•ÂØÜÁ†ÅÁ°ÆËÆ§Ë∫´‰ªΩ', 'error');
                    return;
                }

                try {
                    const response = await API.auth.deleteAccount(password);
                    if (response.success) {
                        API.clearToken();
                        modal.remove();
                        showToast('Ë¥¶Êà∑Â∑≤Ê≥®ÈîÄ', 'success');
                        setTimeout(() => {
                            window.location.href = 'login.html';
                        }, 1000);
                    } else {
                        showToast(response.message || 'Ê≥®ÈîÄÂ§±Ë¥•', 'error');
                    }
                } catch (error) {
                    console.error('Ê≥®ÈîÄË¥¶Êà∑Â§±Ë¥•:', error);
                    showToast('ÁΩëÁªúÈîôËØØÔºåËØ∑Á®çÂêéÈáçËØï', 'error');
                }
            });
        }

        // ========================================
        // STEP 4: Â§ñËßÇËÆæÁΩÆÈÄªËæë
        // ========================================

        // Ëé∑ÂèñÁî®Êà∑ËÆæÁΩÆ
        function getUserSettings() {
            const settings = localStorage.getItem('userSettings');
            return settings ? JSON.parse(settings) : { theme: 'light', defaultView: 'grid' };
        }

        // ‰øùÂ≠òÁî®Êà∑ËÆæÁΩÆ
        async function saveUserSettings(settings) {
            // ÂÖà‰øùÂ≠òÂà∞Êú¨Âú∞
            localStorage.setItem('userSettings', JSON.stringify(settings));
            // ÂºÇÊ≠•ÂêåÊ≠•Âà∞ÂêéÁ´Ø
            try {
                await API.auth.updateSettings(settings);
            } catch (e) {
                console.log('ÂêåÊ≠•ËÆæÁΩÆÂà∞ÂêéÁ´ØÂ§±Ë¥•:', e);
            }
        }

        // ÂàùÂßãÂåñÂ§ñËßÇËÆæÁΩÆ
        function initAppearanceSettings() {
            const settings = getUserSettings();

            // Â∫îÁî®‰∏ªÈ¢ò
            applyTheme(settings.theme);

            // È´ò‰∫ÆÂΩìÂâç‰∏ªÈ¢òÈÄâÈ°π
            $$('.theme-option').forEach(opt => {
                opt.classList.toggle('active', opt.dataset.theme === settings.theme);
            });

            // È´ò‰∫ÆÂΩìÂâçËßÜÂõæÈÄâÈ°π
            $$('.view-option').forEach(opt => {
                opt.classList.toggle('active', opt.dataset.view === settings.defaultView);
            });
        }

        // Â∫îÁî®‰∏ªÈ¢ò
        function applyTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
        }

        // ‰∏ªÈ¢òÂàáÊç¢
        $$('.theme-option').forEach(opt => {
            opt.addEventListener('click', () => {
                const theme = opt.dataset.theme;
                const settings = getUserSettings();
                settings.theme = theme;
                saveUserSettings(settings);

                // Êõ¥Êñ∞UI
                $$('.theme-option').forEach(o => o.classList.remove('active'));
                opt.classList.add('active');

                // Â∫îÁî®‰∏ªÈ¢ò
                applyTheme(theme);
                showToast(`Â∑≤ÂàáÊç¢Âà∞${theme === 'dark' ? 'Ê∑±Ëâ≤' : 'ÊµÖËâ≤'}Ê®°Âºè`, 'success');
            });
        });

        // ËßÜÂõæÂàáÊç¢
        $$('.view-option').forEach(opt => {
            opt.addEventListener('click', () => {
                const view = opt.dataset.view;
                const settings = getUserSettings();
                settings.defaultView = view;
                saveUserSettings(settings);

                // Êõ¥Êñ∞UI
                $$('.view-option').forEach(o => o.classList.remove('active'));
                opt.classList.add('active');

                showToast(`ÈªòËÆ§ËßÜÂõæÂ∑≤ËÆæÁΩÆ‰∏∫${view === 'grid' ? 'ÁΩëÊ†º' : 'ÂàóË°®'}Ê®°Âºè`, 'success');
            });
        });

        // È°µÈù¢Âä†ËΩΩÊó∂ÂàùÂßãÂåñÂ§ñËßÇËÆæÁΩÆ
        initAppearanceSettings();

        // ========================================
        // STEP 5: Êï∞ÊçÆÁÆ°ÁêÜÈÄªËæë
        // ========================================

        // ÂØºÂá∫‰π¶Á≠æ
        $('#exportBtn').addEventListener('click', async () => {
            try {
                const response = await API.data.exportData();

                if (!response.success) {
                    showToast(response.message || 'ÂØºÂá∫Â§±Ë¥•', 'error');
                    return;
                }

                const exportData = response.data;

                if ((!exportData.bookmarks || exportData.bookmarks.length === 0) && 
                    (!exportData.categories || exportData.categories.length === 0)) {
                    showToast('Ê≤°ÊúâÂèØÂØºÂá∫ÁöÑÊï∞ÊçÆ', 'warning');
                    return;
                }

                // ÂàõÂª∫‰∏ãËΩΩ
                const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `bookmarks_${new Date().toISOString().slice(0, 10)}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);

                const bookmarkCount = exportData.bookmarks?.length || 0;
                const categoryCount = exportData.categories?.length || 0;
                showToast(`Â∑≤ÂØºÂá∫ ${bookmarkCount} ‰∏™‰π¶Á≠æÂíå ${categoryCount} ‰∏™ÂàÜÁ±ª`, 'success');
            } catch (error) {
                console.error('ÂØºÂá∫Â§±Ë¥•:', error);
                showToast('ÂØºÂá∫Â§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï', 'error');
            }
        });

        // ÂØºÂÖ•‰π¶Á≠æ
        $('#importBtn').addEventListener('click', () => {
            $('#importFile').click();
        });

        $('#importFile').addEventListener('change', async (e) => {
            const file = e.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = async (event) => {
                try {
                    const importData = JSON.parse(event.target.result);

                    // È™åËØÅÊï∞ÊçÆÊ†ºÂºè
                    if (!importData.bookmarks || !Array.isArray(importData.bookmarks)) {
                        throw new Error('Êó†ÊïàÁöÑÊï∞ÊçÆÊ†ºÂºè');
                    }

                    // Ë∞ÉÁî®ÂêéÁ´ØAPIÂØºÂÖ•
                    const response = await API.data.importData(importData);

                    if (response.success) {
                        const result = response.data || {};
                        const importedBookmarks = result.importedBookmarks || 0;
                        const importedCategories = result.importedCategories || 0;
                        showToast(`ÊàêÂäüÂØºÂÖ• ${importedBookmarks} ‰∏™‰π¶Á≠æÂíå ${importedCategories} ‰∏™ÂàÜÁ±ª`, 'success');
                        
                        // Êõ¥Êñ∞‰∏™‰∫∫‰ø°ÊÅØÈ°µÁöÑ‰π¶Á≠æÊï∞Èáè
                        loadProfileData();
                    } else {
                        showToast(response.message || 'ÂØºÂÖ•Â§±Ë¥•', 'error');
                    }

                } catch (error) {
                    showToast('ÂØºÂÖ•Â§±Ë¥•Ôºö' + error.message, 'error');
                }
            };

            reader.readAsText(file);
            e.target.value = ''; // Ê∏ÖÁ©∫‰ª•‰æøÂèØ‰ª•ÈáçÂ§çÈÄâÊã©Âêå‰∏ÄÊñá‰ª∂
        });

        // Ê∏ÖÁ©∫Êï∞ÊçÆ
        $('#clearDataBtn').addEventListener('click', () => {
            showClearConfirmModal();
        });

        // Á°ÆËÆ§Ê∏ÖÁ©∫ÂºπÁ™ó
        function showClearConfirmModal() {
            const modal = document.createElement('div');
            modal.className = 'confirm-modal-overlay show';
            modal.id = 'clearConfirmModal';
            modal.innerHTML = `
                <div class="confirm-modal">
                    <div class="confirm-modal-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                            <line x1="12" y1="9" x2="12" y2="13"></line>
                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                        </svg>
                    </div>
                    <h3>Á°ÆËÆ§Ê∏ÖÁ©∫ÊâÄÊúâÊï∞ÊçÆÔºü</h3>
                    <p>Ê≠§Êìç‰ΩúÂ∞ÜÂà†Èô§ÊÇ®ÁöÑÊâÄÊúâ‰π¶Á≠æÂíåÂàÜÁ±ªÔºå‰∏îÊó†Ê≥ïÊÅ¢Â§ç„ÄÇÂª∫ËÆÆÂÖàÂØºÂá∫Êï∞ÊçÆ‰Ωú‰∏∫Â§á‰ªΩ„ÄÇ</p>
                    <div class="confirm-modal-actions">
                        <button class="btn btn-secondary" id="clearCancelBtn">ÂèñÊ∂à</button>
                        <button class="btn btn-danger" id="clearConfirmBtn">Á°ÆËÆ§Ê∏ÖÁ©∫</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);

            // ÁªëÂÆö‰∫ã‰ª∂
            $('#clearCancelBtn').addEventListener('click', () => modal.remove());
            modal.addEventListener('click', (e) => {
                if (e.target === modal) modal.remove();
            });

            $('#clearConfirmBtn').addEventListener('click', async () => {
                try {
                    const response = await API.data.clearAll();
                    if (response.success) {
                        modal.remove();
                        showToast('ÊâÄÊúâÊï∞ÊçÆÂ∑≤Ê∏ÖÁ©∫', 'success');
                        // Êõ¥Êñ∞‰∏™‰∫∫‰ø°ÊÅØÈ°µÁöÑ‰π¶Á≠æÊï∞Èáè
                        loadProfileData();
                    } else {
                        showToast(response.message || 'Ê∏ÖÁ©∫Â§±Ë¥•', 'error');
                    }
                } catch (error) {
                    console.error('Ê∏ÖÁ©∫Êï∞ÊçÆÂ§±Ë¥•:', error);
                    showToast('ÁΩëÁªúÈîôËØØÔºåËØ∑Á®çÂêéÈáçËØï', 'error');
                }
            });
        }

    </script>
</body>
</html>
